<!-- Mainly scripts -->
<script src="{$j_basepath}adminlibraries/js/jquery-2.1.1.js"></script>
<script src="{$j_basepath}adminlibraries/js/jquery-ui.custom.min.js"></script>
<script src="{$j_basepath}adminlibraries/js/jquery-ui-1.10.4.min.js"></script>
<script src="{$j_basepath}adminlibraries/js/bootstrap.min.js"></script>
<script src="{$j_basepath}adminlibraries/js/plugins/metisMenu/jquery.metisMenu.js"></script>
<script src="{$j_basepath}adminlibraries/js/plugins/slimscroll/jquery.slimscroll.min.js"></script>

<!-- Flot -->
<script src="{$j_basepath}adminlibraries/js/plugins/flot/jquery.flot.js"></script>
<script src="{$j_basepath}adminlibraries/js/plugins/flot/jquery.flot.tooltip.min.js"></script>
<script src="{$j_basepath}adminlibraries/js/plugins/flot/jquery.flot.spline.js"></script>
<script src="{$j_basepath}adminlibraries/js/plugins/flot/jquery.flot.resize.js"></script>
<script src="{$j_basepath}adminlibraries/js/plugins/flot/jquery.flot.pie.js"></script>
<script src="{$j_basepath}adminlibraries/js/plugins/flot/jquery.flot.symbol.js"></script>
<script src="{$j_basepath}adminlibraries/js/plugins/flot/jquery.flot.time.js"></script>

<!-- Peity -->
<script src="{$j_basepath}adminlibraries/js/plugins/peity/jquery.peity.min.js"></script>
<script src="{$j_basepath}adminlibraries/js/demo/peity-demo.js"></script>

<!-- Custom and plugin javascript -->
<script src="{$j_basepath}adminlibraries/js/inspinia.js"></script>
<script src="{$j_basepath}adminlibraries/js/plugins/pace/pace.min.js"></script>

<!-- jQuery UI -->
<script src="{$j_basepath}adminlibraries/js/plugins/jquery-ui/jquery-ui.min.js"></script>

<!-- Jvectormap -->
<script src="{$j_basepath}adminlibraries/js/plugins/jvectormap/jquery-jvectormap-2.0.2.min.js"></script>
<script src="{$j_basepath}adminlibraries/js/plugins/jvectormap/jquery-jvectormap-world-mill-en.js"></script>

<!-- EayPIE -->
<script src="{$j_basepath}adminlibraries/js/plugins/easypiechart/jquery.easypiechart.js"></script>

<!-- Sparkline -->
<script src="{$j_basepath}adminlibraries/js/plugins/sparkline/jquery.sparkline.min.js"></script>

<!-- Sparkline demo data  -->
<script src="{$j_basepath}adminlibraries/js/demo/sparkline-demo.js"></script>

<!-- Jquery Validate -->
<script src="{$j_basepath}adminlibraries/js/plugins/validate/jquery.validate.min.js"></script>

<script src="{$j_basepath}adminlibraries/js/plugins/validate/additional-methods.js"></script>

<!-- iCheck -->
<script src="{$j_basepath}adminlibraries/js/plugins/iCheck/icheck.min.js"></script>

<!-- bootstrap-fileupload -->
<script src="{$j_basepath}adminlibraries/js/plugins/bootstrap-fileupload/bootstrap-fileupload.min.js"></script>

<!-- Chosen -->
<script src="{$j_basepath}adminlibraries/js/plugins/chosen/chosen.jquery.js"></script>

<!-- select2 -->
<script src="{$j_basepath}adminlibraries/js/plugins/select2/dist/js/select2.full.min.js"></script>
<script src="{$j_basepath}adminlibraries/js/plugins/select2/dist/js/i18n/fr.js"></script>

<!-- FooTable -->
<script src="{$j_basepath}adminlibraries/js/plugins/footable/footable.all.min.js"></script>

<!-- common JS by RSR-->
<script src="{$j_basepath}adminlibraries/js/common.js"></script>

<!-- nestable list-->

<script src="{$j_basepath}adminlibraries/js/plugins/nestable/jquery.nestable.js"></script>
<!-- roj plugins-->

<script src="{$j_basepath}adminlibraries/js/plugins/rjplugins.js"></script>

<!--  CkEditors -->
<script type="text/javascript" src="{$j_basepath}adminlibraries/js/plugins/ckeditor/ckeditor.js"></script>

<!-- Image cropper -->
<script src="{$j_basepath}adminlibraries/js/plugins/cropper/cropper.min.js"></script>

<!-- Steps -->
<script src="{$j_basepath}adminlibraries/js/plugins/staps/jquery.steps.min.js"></script>

<!-- r-multi-select -->
<script src="{$j_basepath}adminlibraries/js/plugins/jquery.r-multi-select.js"></script>

<!-- tags input -->
<script src="{$j_basepath}adminlibraries/js/plugins/tagsinput/bootstrap-tagsinput.js"></script>
<script src="{$j_basepath}adminlibraries/js/plugins/jquery-tags-input/jquery.tagsinput.js"></script>

<!-- type ahead -->
<script src="{$j_basepath}adminlibraries/js/plugins/Typeahead/typeahead.bundle.js"></script>

<!--Video-->
<script src="{$j_basepath}adminlibraries/js/plugins/video/responsible-video.js"></script>

<!--Video-->
<script src="{$j_basepath}adminlibraries/js/plugins/r-video-upload/jquery.r-video-upload.js"></script>

<!-- Sweet alert -->
<script src="{$j_basepath}adminlibraries/js/plugins/sweetalert/sweetalert.min.js"></script> 

<!-- blueimp gallery -->
<script src="{$j_basepath}adminlibraries/js/plugins/blueimp/jquery.blueimp-gallery.min.js"></script>

<!-- file input -->
<script src="{$j_basepath}adminlibraries/js/fileinput.js"></script>
<script src="{$j_basepath}adminlibraries/js/fileinput_locale_fr.js"></script>

<!-- tiny mce -->
<script src="{$j_basepath}adminlibraries/js/plugins/tinymce/tinymce.dev.js"></script>
<script src="{$j_basepath}adminlibraries/js/plugins/tinymce/plugins/table/plugin.dev.js"></script>
<script src="{$j_basepath}adminlibraries/js/plugins/tinymce/plugins/paste/plugin.dev.js"></script>
<script src="{$j_basepath}adminlibraries/js/plugins/tinymce/plugins/spellchecker/plugin.dev.js"></script>
<script src="{$j_basepath}adminlibraries/js/plugins/tinymce/plugins/codesample/plugin.dev.js"></script>

<!-- Date range use moment.js same as full calendar plugin -->
<script src="{$j_basepath}adminlibraries/js/plugins/fullcalendar/moment.min.js"></script>

<!-- picker -->
<script src="{$j_basepath}adminlibraries/js/plugins/datapicker/bootstrap-datepicker.js"></script>
<script src="{$j_basepath}adminlibraries/js/plugins/colorpicker/bootstrap-colorpicker.min.js"></script>
<script src="{$j_basepath}adminlibraries/js/plugins/clockpicker/clockpicker.js"></script>
<script src="{$j_basepath}adminlibraries/js/plugins/datapicker/bootstrap-datepicker.fr.js"></script>

{literal}
    <script type="text/javascript">

        // input file
        var $input = $('input.file[type=file]');
        if ($input.length) {
            $input.fileinput({
                language: 'fr',
                browseClass: "btn btn-white",
                showUpload: false,
                showRemove: false,
                allowedFileExtensions : ['jpg', 'png','gif']
            });
        }

        // custom footable tri
        function customTri(sortField, _this)
        {
            var sortsens = $("#sortsens").val();
            sortsens = (sortsens == "ASC") ? "DESC" : "ASC";
            var page = $("#page").val();

            $.ajax({
                type: 'POST',
                url: {/literal}{urljsstring 'abonnement~abonnement:index'}{literal},
                data: {
                    sortsens: sortsens,
                    sortfield: sortField,
                    page: page,
                    s: $("#searchForm #s").val()
                },
                async: false,
                success: function(resp) {
                    $("#ajaxListTarget").html(resp);
                },
                error: function() {
                }
            });
        }

        // pagination
        function paginate(curPage)
        {
            var sortsens = $("#sortsens").val();
            var sortfield = $("#sortfield").val();

            $.ajax({
                type: 'POST',
                url: {/literal}{urljsstring 'abonnement~abonnement:index'}{literal},
                data: {
                    sortsens: sortsens,
                    sortfield: sortfield,
                    page: curPage,
                    s: $("#searchForm #s").val()
                },
                async: false,
                success: function(resp) {
                    $("#ajaxListTarget").html(resp);
                },
                error: function() {
                }
            });
        }

        // pagination entreprise
        function paginateEntreprise(curPage)
        {
            var sortsens = $("#sortsens").val();
            var sortfield = $("#sortfield").val();            
            var formdata = new FormData();
            i = 0;
            $('input[name="filtrePublication[]"]:checked').each(function()
            {
                formdata.append("filtrePublication[]",$(this).val());
            });
            formdata.append("filtreInfo",$('input[name="filtreInfo"]:checked').val());
            formdata.append("filtreRecherche", $('#filtreRecherche').val());
            formdata.append("filtreCategorie", $("#filtreCategorie").val());
            formdata.append("sortsens", sortsens);
            formdata.append("sortfield", sortfield);
            formdata.append("page", curPage);
            $('#entreprise-list').html('<div class="spiner-example"><div class="sk-spinner sk-spinner-three-bounce"><div class="sk-bounce1"></div><div class="sk-bounce2"></div><div class="sk-bounce3"></div></div></div>');

            $.ajax({
                type: 'POST',
                url: '{/literal}{jfullurl "entreprise~entreprise:index"}{literal}',
                data: formdata,
                processData: false,
                contentType: false,
                async: false,
                success: function(resp) {
                  $('#entreprise-list').html(resp);
                },
                error: function() {
                }
            });
        }

        // tri entreprise

        // custom footable tri
        function entrepriseCustomTri(_sortField, _this)
        {
            var sortsens = $("#sortsens").val();
            sortsens = (sortsens == "ASC") ? "DESC" : "ASC";
            var page = $("#page").val();
            var sortfield = _sortField;            
            var formdata = new FormData();
            i = 0;
            $('input[name="filtrePublication[]"]:checked').each(function()
            {
                formdata.append("filtrePublication[]",$(this).val());
            });
            formdata.append("filtreInfo",$('input[name="filtreInfo"]:checked').val());
            formdata.append("filtreRecherche", $('#filtreRecherche').val());
            formdata.append("filtreCategorie", $("#filtreCategorie").val());
            formdata.append("sortsens", sortsens);
            formdata.append("sortfield", sortfield);
            formdata.append("page", page);
            $('#entreprise-list').html('<div class="spiner-example"><div class="sk-spinner sk-spinner-three-bounce"><div class="sk-bounce1"></div><div class="sk-bounce2"></div><div class="sk-bounce3"></div></div></div>');

            $.ajax({
                type: 'POST',
                url: '{/literal}{jfullurl "entreprise~entreprise:index"}{literal}',
                data: formdata,
                processData: false,
                contentType: false,
                success: function(resp) {
                  $('#entreprise-list').html(resp);
                },
                error: function() {
                }
            });
        }

        $(document).ready(function () {

            // validate search form
            $('#searchForm').validate({
                ignore: [],
                onkeyup: false,
                errorPlacement: function (error, element) {
                    $(element).closest(".input-group").append(error);
                },
                errorElement: "label",
                submitHandler: function (form) {
                    $.ajax({
                        type: 'POST',
                        url: {/literal}{urljsstring 'abonnement~abonnement:index'}{literal},
                        data: {
                            s: $("#searchForm #s").val()
                        },
                        async: false,
                        success: function(resp) {
                            $("#ajaxListTarget").html(resp);
                        },
                        error: function() {
                        }
                    });
                }
            });
        });

    </script>
{/literal}